<div ng-controller="TechController as techCtrl">
  <div class="row" ng-repeat="techdto in techCtrl.allTechs">
    <fieldset class="turn-border" ng-class="techdto.color">
      <legend class="turn-border">{{techdto.civ}}</legend>
      <div class="col-xs-12">
        <table class="tech-pyramid">
          <tbody>
          <tr>
            <td class="spacer" colspan="4"></td>
            <td class="researched" colspan="2" title="Space Flight"
                ng-if="techCtrl.getChosenTech(techdto.techs, 5).length > 0">
              Space Flight
            </td>
            <td class="available" colspan="2" title="Space Flight"
                ng-if="techCtrl.getChosenTech(techdto.techs, 5).length == 0">Space
              Flight
            </td>
            <td class="spacer"></td>
          </tr>
          <tr>
            <td class="spacer" colspan="3"></td>
            <td class="researched" colspan="2" ng-repeat="tech in techCtrl.getChosenTech(techdto.techs, 4)"
                title="{{tech.name}}">
              {{tech.name}}
            </td>
            <td class="available" colspan="2" title="21 trade needed to learn level 4 tech"
                ng-repeat="lvl in techCtrl.getAvailableTech(techdto.techs, 4)">21
            </td>
            <td class="spacer"></td>
          </tr>
          <tr>
            <td class="spacer" colspan="2"></td>
            <td class="researched" colspan="2" ng-repeat="tech in techCtrl.getChosenTech(techdto.techs, 3)"
                title="{{tech.name}}">
              {{tech.name}}
            </td>
            <td class="available" colspan="2" title="16 trade needed to learn level 3 tech"
                ng-repeat="lvl in techCtrl.getAvailableTech(techdto.techs, 3)">16
            </td>
            <td class="spacer"></td>
          </tr>
          <tr>
            <td class="spacer" colspan="1"></td>
            <td class="researched" colspan="2" ng-repeat="tech in techCtrl.getChosenTech(techdto.techs, 2)"
                title="{{tech.name}}">
              {{tech.name}}
            </td>
            <td class="available" colspan="2" title="11 trade needed to learn level 2 tech"
                ng-repeat="lvl2 in techCtrl.getAvailableTech(techdto.techs, 2)">11
            </td>
            <td class="spacer"></td>
          </tr>
          <tr>
            <td class="researched" colspan="2" ng-repeat="tech in techCtrl.getChosenTech(techdto.techs, 1)"
                title="{{tech.name}}">
              {{tech.name}}
            </td>
            <td class="available" colspan="2" title="6 trade needed to learn level 1 tech"
                ng-repeat="lvl1 in techCtrl.getAvailableTech(techdto.techs, 1)">6
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </fieldset>
  </div>
</div>

