<div ng-cloak>
  <div class="row padd-top-7">
    <div class="row padd-top-7">
      <div class="panel panel-default col-xs-12">
        <div class="panel-heading"><h3>Below is a the map. Press the link below and copy the map! <a ng-href="{{currentGame.mapEditLink}}" target="_blank">LINK TO MAP</a></h3></div>
        <div class="panel-body">
          <iframe id="presentFrame" class="col-xs-12" ng-src="{{currentGame.mapLink}}" frameborder="0" height="1024"
                  allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
        </div>
      </div>
    </div>
  </div>
  <div class="row" ng-if="userHasAccess">
    <div class="panel panel-success col-xs-12">
      <div class="panel-heading"><h3>Template for a 4 player map which you can copy and use for your own games</h3>
      </div>
      <div class="panel-body">
        <h1><a href="https://docs.google.com/presentation/d/1hgP0f6hj4-lU6ysdOb02gd7oC5gXo8zAAke4RhgIt54/edit?usp=sharing" target="_blank">Link to Map template</a></h1>
        <ul>
          <li>You need a Google account</li>
          <li>Push options -> open editor</li>
          <li>Make a copy of your own (File -> copy)</li>
          <li>Make it public to read (File -> Share)</li>
          <li>Copy the URL and save it into the form</li>
          <li>A read only view should now appear</li>
          <li><b>Share the URL in the chat and give edit access to all players, so everyone can participate in editing the map</b></li>
        </ul>

        <p class="padd-top-7">
        <form name="form" ng-submit="gameCtrl.updateMapLink()">
          <div class="form-group">
            <label for="inputMapLink">Link to copy of your map presentation</label>
            <input type="text" class="form-control" id="inputMapLink" ng-model="currentGame.newMapLink"
                   name="inputMapLink"
                   placeholder="Insert link to copy of your map"/>
          </div>
          <button type="submit" class="btn btn-success">Update link!</button>
        </form>
        </p>
      </div>
    </div>
  </div>
</div>
<script>
  // update with the desired time to refresh the presentation (in seconds)
  var refreshSeconds = 60;

  var timer=setInterval(function(){refreshFrame()}, refreshSeconds*1000);
  function refreshFrame()
  {
    var iframe = document.getElementById('presentFrame');
    var iframeURL = iframe.src;
    iframe.src = iframeURL;
  }
</script>

